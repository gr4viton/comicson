#:kivy 1.9


<RedDwarfQiz>:
    cols: 2
    layout_bottom: layout_bottom
    GridLayout:
        cols:1
        Menu:
            size_hint_y: 4
        GridLayout:
            id: layout_bottom
            cols: 1
#            Camera:
#                id: camera
#                resolution: 399, 299
##
#        BoxLayout:
#            orientation: 'horizontal'
#            size_hint_y: None
#            height: '48dp'
#            Button:
#                text: 'Start'
#                on_release: camera.play = True
#
#            Button:
#                text: 'Stop'
#                on_release: camera.play = False

<Menu>:
    cs: cs
    min_move: 0.05
    scroll_distance: self.height * 0.3
    direction: 'bottom'
    GridLayout:
        cols: 1
        Label:
            font_size: 30
            #'RedDwarf Queez'
            text:
                ('[b][color=ffffff]RE[/color][color=ff0000]D\nD[/color][color=ffffff]WARF[/color][/b]\n'
                '[b][color=ac42dc]Queez[/color][/b]\n')
            markup: True
            valign: 'middle'
            halign: 'center'
            size: self.texture_size
            line_height: 0.9
#            size_hint_y: 0.3
    #        Label:
    #            text: 'Welcom to RDQ!'
    #        Label:
    #            multiline: 'true'
    #
    #            text: 'To navigate through this app use swipes to sides. Try it out!'
        Button:
            text: 'xkcd'
            size: sp(68), sp(62)
            on_press: root.load_next()
        Button:
            text: 'smbc'

    ComicScreen:
        id: cs
#        downloader: root.downloader


<CenteredAsyncImage>
    size: self.texture_size
#    size_hint: None, None
#    size_hint: 10,10
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

<ComicStrip>
#    parent: parent
    id: parent

    rightmost: 'False'
    leftmost: 'False'

    cols:1
    title: '..loading..'
    image_url: ''
#    name: 'unitialized'
    alt: ''

    num: 0
    size_hint: 1, 1
    text_size: self.size

    margin: 1
    color: .08,.16 , .24
    canvas.before:
        Color:
            rgb: self.color
        Rectangle:
            pos: self.x + self.margin, self.y + self.margin + 1
            size: self.width - 2 * self.margin , self.height - 2 * self.margin


    GridLayout:
        cols:2
        padding: 5,5,5,5
#        title: root.title
#        num: root.num
        size_hint: 1, 0.1
        height: 15
        GridLayout
            size_hint_x: 0.2
            cols:1

            color2: .08,.91 , .24
            margin: 1
            canvas.before:
                Color:
                    rgb: self.color2
                Rectangle:
                    pos: self.x + self.margin, self.y + self.margin + 1
                    size: self.width - 2 * self.margin , self.height - 2 * self.margin

            Label:
                size_hint: 0.2, 1
                valign: 'middle'
    #            halign: 'center'
                size: self.texture_size
                text: str(parent.num)
        GridLayout
            cols:1

            color2: .28,.21 , .44
            margin: 1
#            size: self.texture_size
            canvas.before:
                Color:
                    rgb: self.color2
                Rectangle:
                    pos: self.x + self.margin, self.y + self.margin + 1
                    size: self.width - 2 * self.margin , self.height - 2 * self.margin
#                    size: self.width , self.height

            Label:
                size_hint: 0.8, 1
                valign: 'middle'
                halign: 'center'
                size: self.texture_size
                text: parent.title

#    GridLayout:
#        cols:1

#
##    CenteredAsyncImage
##        source: root.image_url
##        source: 'http://kivy.org/funny-pictures-cat-is-expecting-you.jpg'

<ComicStripSlideViewer>
    min_move: 0.05
    scroll_distance: self.width * 0.05
    scroll_timeout: 200
    loop: True
#    buffer_count: 3

<ComicScreen>
    viewer: viewer
    GridLayout
        cols: 1
        GridLayout:
            cols:4
            height: 13
            size_hint: 1, 0.1
            padding: 5,5,5,5

            Button:
                text: 'prev'
            Button:
                text: 'rnd'
            Button:
                text: 'hide'
            Button:
                text: 'next'
                on_press: viewer.next_strip()

        ComicStripSlideViewer:
            id: viewer
            parent: root
#            downloader: root.downloader
            buffer_count: 3

<CustomPopup>:
    size_hint: .5, .5
    auto_dismiss: False
    title: 'Hello world'
    Button:
        text: 'Click me to dismiss'
        on_press: root.dismiss()

<Page>:
    cols: 3
    name: 'unitialized'
    Label:
        text: root.name
    Label:
        text: str(id(root))
    Button
        text: 'load(page 3)'
        on_release:
            carousel = root.parent.parent
            carousel.load_slide(carousel.slides[2])
    Button
        text: 'prev'
        on_release:
            root.parent.parent.load_previous()
    Button
        text: 'next'
        on_release:
            root.parent.parent.load_next()




<StepWidget>:
    cols: 1
    stat_label: stat_label
    size_hint_y: None
    height: 300

    size_hint_x: 1/3
    padding: (2,2,2,2)
    spacing: (2,2)
    margin: 1
    color: .08,.16 , .24
    canvas.before:
        Color:
            rgb: self.color
        Rectangle:
            pos: self.x + self.margin, self.y + self.margin + 1
            size: self.width - 2 * self.margin , self.height - 2 * self.margin
#            self.thickness
    ToggleButton:
        id: toggle
        text: root.name
        size_hint_y: 0.15
        state: 'down'
        on_state: root.set_drawing(self.state == 'down')

    Image:
        id: kivy_image
        size_hint_y: 0.8
#        size_hint_x: 1
        background_normal: 'True'
    Label:
        id: stat_label
        valign: 'top'
        size_hint_y: 0.08
    #    on_touch_down: root.drawing = (toggle.state == 'down')
    #    on_press: print('jasd')
        #self.toggle_drawing()
    #    root.drawing = (toggle_object.state == 'down')

#    GridLayout
#        cols: 1